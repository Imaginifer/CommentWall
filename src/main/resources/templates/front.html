<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html dir="ltr">
    <head>
        <title>Üzenetek</title>
        <meta charset="UTF-8">
        <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
        <link rel="stylesheet" th:href="@{/css/reset.css}">
        <link rel="stylesheet" th:href="@{/css/style.css}">
    </head>
    <body class="httr">
        <div class="container">
          <div class="btnrow">
              <ul>
                  <li data-sec-authorize="!isAuthenticated()" >
                      <a class="hiv" href="http://localhost:8080/login">BELÉP</a></li>
                  <!--<li data-sec-authorize="isAuthenticated()"><a class="hiv" href="http://localhost:8080/logout">KILÉP</a></li>-->
                  <li data-sec-authorize="isAuthenticated()">
                    <form data-th-action="@{/logout}" method="post">
                      <input type="submit" value="KILÉP">
                    </form>
                  </li>
                  <li data-sec-authorize="!isAuthenticated()">
                      <a class="hiv" href="http://localhost:8080/messaging/register">REGISZT.</a></li>
                  <li><a class="hiv" href="http://localhost:8080/messaging/topics">TOPIK</a></li>
                  <li data-sec-authorize="hasRole('ADMIN')">
                        <a class="hiv" href="http://localhost:8080/messaging/commenters">FELHASZN.</a></li>
                  <li><a class="hiv" href="http://localhost:8080/messaging/search">KERES</a></li>
              </ul>
          </div>
            <div class="btnrow">
                <ul>
                    <li><a class="hiv" href="http://localhost:8080/messaging">IDENT+</a></li>
                    <li><a class="hiv" href="http://localhost:8080/messaging?ord=6">IDENT-</a></li>
                    <li><a class="hiv" href="http://localhost:8080/messaging?ord=1">DÁTUM+</a></li>
                    <li><a class="hiv" href="http://localhost:8080/messaging?ord=2">DÁTUM-</a></li>
                    <li><a class="hiv" href="http://localhost:8080/messaging?ord=3">NÉV+</a></li>
                    <li><a class="hiv" href="http://localhost:8080/messaging?ord=4">NÉV-</a></li>
                    <li data-sec-authorize="hasRole('ADMIN')">
                      <a class="hiv" href="http://localhost:8080/messaging?only=no">MIND</a>
                    </li>
                    <li data-sec-authorize="hasRole('ADMIN')">
                      <a class="hiv" href="http://localhost:8080/messaging?only=yes">TÖRÖLT</a>
                    </li>
                </ul>
            </div>
            <div class="messagelist">
                <div class="msgbox" data-th-each="message: ${messages}">
                    <p class="usr" data-th-text = "${message.username}"></p>
                    <p class="cimzett" data-th-if="${message.isReply()==true}" data-th-text = "${message.getReplyTo()}"></p>
                    <p class="txt" data-th-text = "${message.text}"></p>
                    <div class="msgfooter">
                      <p class="time" data-th-text = "${message.date}"></p>
                      <p class="time" data-th-text = "${message.getTopic()}"></p>
                      <a class="hiv" data-sec-authorize="isAuthenticated()" data-th-href="@{'/messaging/new?reply='+${message.getMsgId()}}">VÁLASZ</a>
                      <a data-sec-authorize="hasRole('ADMIN')" data-th-if="${message.deleted==false}" class="hiv" data-th-href="@{'/messaging/delete/'+${message.getMsgId()}}">TÖRÖL</a>
                      <a data-th-if="${message.deleted==true}" class="hiv" data-th-href="@{'/messaging/restore/'+${message.getMsgId()}}">VISSZAÁLLÍT</a>
                      <a class="hiv" data-th-text = "${message.getMsgId()}" data-th-href="@{'/messaging/'+${message.getMsgId()}}"></a>
                    </div>
                </div>
            </div>
            <div class="msgbox" data-sec-authorize="isAuthenticated()">
              <div class="newmsg">
                <a class="hiv" href="http://localhost:8080/messaging/new">ÚJ ÜZENET</a>
              </div>
            </div>

        </div>
    </body>
</html>
